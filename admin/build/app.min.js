"use strict";!function(c){var e=c(document),t={startTime:"0:00",endTime:"24:00",interval:60},n={init:function(){n.initObjects(),n.clickEvents(),n.changeEvents(),n.submitEvents(),n.keyUpEvents()},submitEvents:function(){c(".post-type-cf_cc_condition #post").on("submit",function(){c(".date-time-schedule").each(function(){var e=c(this);e.parent().find(".schedule-input").val(JSON.stringify(e.data("artsy.dayScheduleSelector").serialize()))})})},changeEvents:function(){e.on("change",".rule-wrap select",function(){var e=c(this),t=e.find(":selected"),n=c(".admin-conditions-wrap"),t=t.data("show-fields");void 0!==t&&(t=t.replace(/\|/g," "),e.hasClass("second-level-selection")&&e.closest(".second-level-selection-container").attr("class","cf-cc-form-group second-level-selection-container").addClass(t),n.attr("class","admin-conditions-wrap").addClass(t),c("#hidden_stored_selection_classes").val(t))}),e.on("change click",".cf-cc-autocomplete-opener",function(){var e=c(this),t=c(".cf-cc-geo-selected");t.stop(!0).slideUp(250),t.removeClass("cf-cc-geo-selected"),t=e.data("open"),(e=c("."+t)).addClass("cf-cc-geo-selected"),e.stop(!0).slideDown(250)})},clickEvents:function(){e.on("click",".conditional-tabs .tab",function(){var e=c(this).data("trigger");void 0!==e&&(c(".conditional-tabs").attr("class","conditional-tabs").addClass(e),c(".trigger-type").val(e).trigger("change"))}),e.on("click",".settimeinstructions .closeX",function(){n.createCookie("set_time_instructions",!0,712),c(this).closest(".set-time-info-container").remove()})},keyUpEvents:function(){e.on("keyup","input[data-field='url-custom']",function(){var e,t=c(this),n=t.val(),i=!0;c("input[data-field='url-custom']").not(t).each(function(){var e=c(this).val();""!==e&&n===e&&(i=!1)}),i?((e=t.closest(".form-group")).removeClass("has-danger").removeClass("has-error"),e.find(".help-block").remove(),c("#publishing-action .query-string-err-notification").remove()):(t.closest(".form-group").addClass("has-danger").addClass("has-error"),t.after('<div class="help-block">'+CFCCAdmin.text.duplicatedQueryString+"</div>"),c("#publishing-action").append('<div class="query-string-err-notification">'+CFCCAdmin.text.duplicatedQueryStringOnPublish+"!</div>")),e=""===n?"your-query-string":n,t.closest(".rule-wrap").find(".instructions b").text(e)})},initObjects:function(){c(".post-type-cf_cc_condition #post").attr("novalidate","novalidate"),c(".date-time-schedule").dayScheduleSelector(t),c(".cfdatetimepicker").cfdatetimepicker(),-1<window.location.href.indexOf("post-new.php?post_type=cf_cc_condition")&&c('a[href="'+window.location.href+'"]').closest("li").addClass("current");var e=c(".query-string-code, .cf-cc-dynamic-link-code, .wp-editor-area");c("#cf-cc-versions-container .cf-cc-versions-sortable").disableSelection(),e.on("mouseenter",function(){c("#cf-cc-versions-container .cf-cc-versions-sortable").enableSelection()}),e.on("mouseleave",function(){c("#cf-cc-versions-container .cf-cc-versions-sortable").disableSelection()}),c(".cf-cc-versions-sortable").keydown(function(e){65===e.keyCode&&e.ctrlKey&&e.target.select()})},createCookie:function(e,t,n){var i,n=n?((i=new Date).setTime(i.getTime()+24*n*60*60*1e3),"; expires="+i.toGMTString()):"";document.cookie=e+"="+t+n+"; path=/"}};e.ready(function(){n.init()})}(jQuery);