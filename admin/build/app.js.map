{"version":3,"sources":["app.js"],"names":["$","$document","document","scheduleSettings","startTime","endTime","interval","cfAdminConditions","init","initObjects","clickEvents","changeEvents","submitEvents","keyUpEvents","on","each","$elem","$parent","parent","scheduleInput","find","val","JSON","stringify","data","serialize","$select","$selectedOption","$adminWrapper","$triggerData","$triggerDataClasses","replace","hasClass","$selectionContainer","closest","attr","addClass","$this","effectRate","$currentShownElem","classNameOfElemToShow","$elemToShow","stop","slideUp","removeClass","slideDown","correspondingSelect","trigger","createCookie","remove","$input","inputValue","isValid","queryStringTyped","not","$inputAuxValue","after","CFCCAdmin","text","duplicatedQueryString","append","duplicatedQueryStringOnPublish","$formGroup","dayScheduleSelector","cfdatetimepicker","window","location","href","indexOf","$elementsToEnableSelection","disableSelection","enableSelection","keydown","e","keyCode","ctrlKey","target","select","name","value","days","expires","date","Date","setTime","getTime","toGMTString","cookie","ready","jQuery"],"mappings":"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","file":"app.js","sourcesContent":["(function ($) {\n\t'use strict'; // Global Vars\n\n\tvar $document = $(document);\n\n\tvar scheduleSettings = {\n\t\t// days: [2, 3, 4, 5, 6, 0, 1],\n\t\tstartTime: '0:00',\n\t\tendTime: '24:00',\n\t\tinterval: 60\n\t};\n\n\tvar cfAdminConditions = {\n\n\t\tinit: function init() {\n\t\t\tcfAdminConditions.initObjects();\n\t\t\tcfAdminConditions.clickEvents();\n\t\t\tcfAdminConditions.changeEvents();\n\t\t\tcfAdminConditions.submitEvents();\n\t\t\tcfAdminConditions.keyUpEvents();\n\t\t},\n\n\t\tsubmitEvents: function submitEvents() {\n\t\t\t$('.post-type-cf_cc_condition #post').on('submit', function () {\n\t\t\t\t// Updating all the schedule data with their correspond hidden input\n\t\t\t\t$('.date-time-schedule').each(function () {\n\t\t\t\t\tvar $elem = $(this);\n\t\t\t\t\tvar $parent = $elem.parent();\n\t\t\t\t\tvar scheduleInput = $parent.find('.schedule-input');\n\t\t\t\t\tscheduleInput.val(JSON.stringify($elem.data('artsy.dayScheduleSelector').serialize()));\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tchangeEvents: function changeEvents() {\n\t\t\t$document.on('change', '.rule-wrap select', function () {\n\t\t\t\tvar $select = $(this);\n\t\t\t\tvar $selectedOption = $select.find(':selected');\n\t\t\t\tvar $adminWrapper = $('.admin-conditions-wrap');\n\t\t\t\tvar $triggerData = $selectedOption.data('show-fields');\n\n\t\t\t\tif (typeof $triggerData !== 'undefined') {\n\t\t\t\t\tvar $triggerDataClasses = $triggerData.replace(/\\|/g, ' ');\n\n\n\t\t\t\t\tif ($select.hasClass('second-level-selection')) {\n\t\t\t\t\t\tvar $selectionContainer = $select.closest('.second-level-selection-container');\n\t\t\t\t\t\t$selectionContainer.attr('class', 'cf-cc-form-group second-level-selection-container').addClass($triggerDataClasses);\n\t\t\t\t\t}\n\n\t\t\t\t\t$adminWrapper.attr('class', 'admin-conditions-wrap').addClass($triggerDataClasses);\n\n\t\t\t\t\t$('#hidden_stored_selection_classes').val($triggerDataClasses);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$document.on('change click', '.cf-cc-autocomplete-opener', function () {\n\t\t\t\tvar $this = $(this);\n\t\t\t\tvar effectRate = 250;\n\t\t\t\tvar $currentShownElem = $('.cf-cc-geo-selected');\n\t\t\t\tvar classNameOfElemToShow;\n\t\t\t\tvar $elemToShow;\n\t\t\t\t$currentShownElem.stop(true).slideUp(effectRate);\n\t\t\t\t$currentShownElem.removeClass('cf-cc-geo-selected'); // Handle new element\n\n\t\t\t\tclassNameOfElemToShow = $this.data('open');\n\t\t\t\t$elemToShow = $('.' + classNameOfElemToShow);\n\t\t\t\t$elemToShow.addClass('cf-cc-geo-selected');\n\t\t\t\t$elemToShow.stop(true).slideDown(effectRate);\n\t\t\t});\n\t\t},\n\n\t\tclickEvents: function clickEvents() {\n\t\t\t$document.on('click', '.conditional-tabs .tab', function () {\n\t\t\t\tvar correspondingSelect = $(this).data('trigger');\n\n\t\t\t\tif (typeof correspondingSelect !== 'undefined') {\n\t\t\t\t\t$('.conditional-tabs').attr('class', 'conditional-tabs').addClass(correspondingSelect);\n\t\t\t\t\t$('.trigger-type').val(correspondingSelect).trigger('change');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$document.on('click', '.settimeinstructions .closeX', function () {\n\t\t\t\t// write cookie to the client in order to prevent re-displaying of the info box\n\t\t\t\tcfAdminConditions.createCookie('set_time_instructions', true, 712); // 712 days - 2 years\n\t\t\t\t// remove the box from the view\n\n\t\t\t\t$(this).closest('.set-time-info-container').remove();\n\t\t\t});\n\t\t},\n\n\t\tkeyUpEvents: function keyUpEvents() {\n\t\t\t// update query string text in the instruction box\n\t\t\t$document.on('keyup', \"input[data-field='url-custom']\", function () {\n\t\t\t\tvar $input = $(this);\n\t\t\t\tvar inputValue = $input.val();\n\t\t\t\tvar isValid = true;\n\t\t\t\tvar queryStringTyped;\n\t\t\t\t$(\"input[data-field='url-custom']\").not($input).each(function () {\n\t\t\t\t\tvar $inputAuxValue = $(this).val();\n\n\t\t\t\t\tif ($inputAuxValue !== '') {\n\t\t\t\t\t\tif (inputValue === $inputAuxValue) {\n\t\t\t\t\t\t\tisValid = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (!isValid) {\n\t\t\t\t\t// handle invalid query string\n\t\t\t\t\t$input.closest('.form-group').addClass('has-danger').addClass('has-error');\n\t\t\t\t\t$input.after('<div class=\"help-block\">' + CFCCAdmin.text.duplicatedQueryString + '</div>');\n\t\t\t\t\t$('#publishing-action').append('<div class=\"query-string-err-notification\">' + CFCCAdmin.text.duplicatedQueryStringOnPublish + '!</div>');\n\t\t\t\t} else {\n\t\t\t\t\tvar $formGroup = $input.closest('.form-group');\n\n\t\t\t\t\t// query string is valid\n\t\t\t\t\t$formGroup.removeClass('has-danger').removeClass('has-error');\n\t\t\t\t\t$formGroup.find('.help-block').remove();\n\t\t\t\t\t$('#publishing-action .query-string-err-notification').remove();\n\t\t\t\t}\n\n\t\t\t\tqueryStringTyped = inputValue === '' ? 'your-query-string' : inputValue;\n\t\t\t\t$input.closest('.rule-wrap').find('.instructions b').text(queryStringTyped);\n\t\t\t}); // update query string text in the instruction box\n\t\t},\n\n\t\tinitObjects: function initObjects() {\n\t\t\t$('.post-type-cf_cc_condition #post').attr('novalidate', 'novalidate');\n\n\t\t\t$('.date-time-schedule').dayScheduleSelector(scheduleSettings); // Enable DateTimePicker\n\n\t\t\t$('.cfdatetimepicker').cfdatetimepicker(); // set custom Add New link active\n\n\t\t\tif (window.location.href.indexOf('post-new.php?post_type=cf_cc_condition') > -1) {\n\t\t\t\t$('a[href=\"' + window.location.href + '\"]').closest('li').addClass('current');\n\t\t\t}\n\n\t\t\tvar $elementsToEnableSelection = $('.query-string-code, .cf-cc-dynamic-link-code, .wp-editor-area');\n\n\t\t\t$('#cf-cc-versions-container .cf-cc-versions-sortable').disableSelection();\n\t\t\t$elementsToEnableSelection.on('mouseenter', function () {\n\t\t\t\t$('#cf-cc-versions-container .cf-cc-versions-sortable').enableSelection();\n\t\t\t});\n\t\t\t$elementsToEnableSelection.on('mouseleave', function () {\n\t\t\t\t$('#cf-cc-versions-container .cf-cc-versions-sortable').disableSelection();\n\t\t\t});\n\t\t\t$('.cf-cc-versions-sortable').keydown(function (e) {\n\t\t\t\tif (e.keyCode === 65 && e.ctrlKey) {\n\t\t\t\t\te.target.select();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// Create cookie\n\t\tcreateCookie: function createCookie(name, value, days) {\n\t\t\tvar expires;\n\t\t\tvar date;\n\n\t\t\tif (days) {\n\t\t\t\tdate = new Date();\n\t\t\t\tdate.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n\t\t\t\texpires = '; expires=' + date.toGMTString();\n\t\t\t} else {\n\t\t\t\texpires = '';\n\t\t\t}\n\n\t\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\n\t\t}\n\t};\n\n\t$document.ready(function () {\n\t\tcfAdminConditions.init();\n\t});\n})(jQuery);\n"]}